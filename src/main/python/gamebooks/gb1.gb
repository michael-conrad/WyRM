Title: Slash'n Up! Book 0.5
Subtitle: Dungeons of the Forsaken Abbey
Author: Michael Conrad
License: CC-BY-SA
Note: A "Hack'n" Slash Game Book
Attribution: Gabriel P (urudnd@gmail.com)

Library: character_sheet
Library: equipment
Library: mana
Library: skills
Library: talents
Library: gb_utils
Library: npcs
Library: pcs
Library: room_descriptions
Library: mob_combat

[Start]

world player;
world facing;

once {
    player = PCs.player_forsaken_alley();
}


"""
Welcome New Adventurer!

I hope you enjoy this experiment in static interactive fiction ebook creation.
"""

direction "About this book" "About" facing "w";
direction "Show your support" "Show Your Support" facing "w";
direction "Start the game" "Start the Game" facing "w";

[About]


"""
This is a Warrior, Rogue, Mage rules based gamebook.

You are playing a gamebook using the one page dungeon for the quest:

    "Dungeons of the Forsaken Abbey"
    By Gabriel P. (urudnd@gmail.com)
    Copyright 2010, CC-BY-SA

The original one page dungeon is from "One Page Dungeon Compendium", 2010 Edition.
"""

direction "Show your support" "Show Your Support" facing "w";
direction "Start the game" "Start the Game" facing "w";

[Show Your Support]


"""
Don't forget to leave a five star review with comments.
Adding a brief description of your adventure to the review would be appreciated.

My husband is also a writer, so please look for "Forgiving Judas" by Spencer Conrad.
"""

direction "About this book" "About" facing "w";
direction "Start the game" "Start the Game" facing "w";

[Start the Game]

"""
You've come to explore the ruins of an abbey whose name has been forgotten.
There are tales of an all black clad warrior-mage with divinely blessed weapons,
armor, and other gear, who went in and never returned. It is whispered that the
armor, weapons, and other gear await any brave enough and strong enough to go
find it. You've decided you're that someone.

# Your Starting Stats

* Warrior: {player.warrior} - Determines proficiency with strength and fighting related skills.
* Rogue: {player.rogue} - Determines proficiency with agility and stealth related skills.
* Mage: {player.mage} - Determines proficiency with mana and mental related skills.

## Pools

* Fate: {player.fate} - Divine intervention used to avoid combat death or other fatal circumstances. Use is automatic. Does not refill.
* Armor_Penalty: {player.armor_penalty} - Penalty against mana pool based on armor worn.
* Hit Points: {player.hp} - Life points. When it falls to < Â½ skill penalties are assessed. If it falls to 0 death occurs.
* Mana: {player.mana} ({player.mage}*2 base - {player.armor_penalty} armor penalty) - Used by spell casting. Only refills during sleep or meditation.
* Defense: 7 - Proficiency enemies need to achieve to damage you.

## Skills

* Acrobatics (Rogue) Training in activities like dancing, contortion, climbing, tightrope walking, tumbling.
* Axes (Warrior) Training with axes and polearms
* Daggers (Rogue) Training with daggers and knives.

## Talents

* Massive Attack: You can add your Warrior level to your melee attack damage once per combat.

## Spells

* Frost Burn, Mana: 1, Difficulty: Easy, Touch. 1d6-2 damage. Mana burn raises damage by +1.
* Healing Hand, Mana: 1, Difficulty: Easy, Touch. 1d6 HP healed. Mana burn raises heal by +1.

## Equipment

* Adventurer's Kit: Flint and tinder. Water flask. Blanket. Bed roll. Small tent.
* Backpack
* Clothing Common
* Clothing Travel
* Iron Rations 1 week
* Pickaxe
* Rations 1 week
* Rope 30 feet
* Spellbook: Lose this and you can't cast spells until you locate another.
* Torches: 3 each

## Money

* SP: 122

## Weapons

Axe (Axes) [1d6]

## Armor

Chain, Defense: +5, Mana: -4

Atop of the hill stand the ruins of what was once an abbey. Legend has it that
long ago the studious monks became corrupted by some evil and were destroyed by
a band of wizards.

As a new adventurer you have come seeking loot. Hopefully stuff that will help
with future adventures.
"""

goto "town" facing "w";

[5]
room looted;
room alcove;
once {
    looted = False;
    alcove = False;
    """
    You come to a portcullis. Beyond you see a 90ft x 40ft room with
    alcoves in the walls. You can't see into the alcoves from here.
    You push the portcullis open with the sound of rusted screeching metal
    and step into the room to get a better view. The alcoves
    are filled with the skeletons and corpses of monks, except one
    in the {facing.e} wall.
    """
} else {
    "You are in the crypt. The portcullis is {facing.s}. The empty alcove is to the {facing.e}."
}

if (!alcove) {
    option "Examine empty alcove" {
        alcove = True;
        "You discover a cleverly disguised door."
    }
} else {
    direction "Go through door in alcove to your {facing.e}." "5a" facing "e";
}

if (!looted) {
    option "Loot alcoves" {
        looted = True;
        "You go crazy looting"
    }
}

direction "Exit the crypt using the portcullis to your {facing.s}." "4way" facing "s";

[5a]


once {
    rooms("5a").desc1;
} else {
    rooms("5a").desc2;
}

direction "Exit room" "5" facing "w";

[4way]

once {
    """
    You are at a four way intersection.
    You came in from the passage to your {facing.e}.
    The passages {facing.n}, {facing.s}, and {facing.w} disappear into darkness.
    """
} else {
    "You are at a four way intersection. The passage to your {facing.e} leads to the ruins above."
}

direction "{facing.dn}" "5" facing "n";
direction "{facing.dw}" "4" facing "w";
direction "{facing.de}" "1" facing "e";
direction "{facing.ds}" "3 Way" facing "s";

[1]

"""
A flight of stairs leads up to the {facing.n}. A long passageway is to your {facing.w}.
"""

option "Climb up stairs" {
    """
    You climb up two flights of stairs, turn left, climb up one more flight of stairs, and come
    out into the ruins of the Abbey.
    """
    goto "ruins" facing "w";
    "dead code"
}
direction "Follow passageway" "4way" facing "w";

[ruins]

once {
"""
You walk up the hill to the ruins.

Digging through the rumble you happen upon a flight of stairs leading down
underground to your {facing.e}.
"""
} else {
"You see the rubble of destroyed buildings all about. Stairs leading down are to your {facing.e}."
}

direction "Return to town" "town" facing "n";

"""
## Abbey Ruins

Rubble and collapsed buildings are all about. You see a flight of stairs heading down to your {facing.e}
"""

direction "Visit town" "town" facing "n";
option "Climb down stairs" {
    """
    You climb down a flight of stairs, come to a landing, then turning right go down an additional
    two flights of stairs
    """
    goto "1" facing "s";
}

[town]

"""
You are in the main town square.

You see an alchemy shop to your {facing.n}.
There is a weapons and armory shop to your {facing.w}.
The inn where you have a room is to the the {facing.e}.
To the {facing.s} is the road leading out of town which goes by the ruins of the abbey.
"""

option "Visit magic shop" {
    "You walk into the local magic shop."
    goto "potion-shop" facing "n";
}

option "Go weapon and armor shopping" {
    "You walk into the local armory."
    goto "armory-shop" facing "w";
}

direction "Retire to the inn [end the game]" "end-game" facing "e";
direction "Head down road and go to the abbey" "ruins" facing "e";

[potion-shop]
room health_in_stock
once {
    health_in_stock = 3
}
if (health_in_stock>0) {
    "A sign says: Only health potions are in stock. 10sp each."

    option "Purchase a health potion" {
        if (player.money.sp < 10) {
            "You don't have enough money."
        } else {
            "You hand over 10sp to the merchant and he gives you a potion."
            player.money.sp -= 10
            player.add_item(Item("Healing potion"))
        }
    }
} else {
    "A sign says: No potions are in stock. Try back again later."
    if (3@6 == 1) {
        health_in_stock = 1@10
    }
}

direction "Exit the shop" "town" facing "s";

[armory-shop]

direction "Exit the armory" "town" facing "e";

[end-game]

"Found Items:"

player.found_items;

"Full Inventory:"

player.inv;

[2]

once {
    """
    You follow the passage for 50ft and come to a cave with a tiled floor. You see a stone plinth on the far
    side holding a two handed war axe. Even from this distance you can tell that it is a finely crafted
    weapon. Next to the plinth on the floor you see the remains of a monk with several arrows in its back.
    looks like the monk was trying to reach the axe before being struck down."""

    "As you look beyond the dead monk you see figures moving into the torchlight."

    Weapon.by_name("Axe (Dark Enchanted)");
    repeat 1@3 NPC.skeleton_warrior();
    repeat 1@4 NPC.zombie();
} else {
    "You are in a tiled floor cave with a stone plinth."
}

direction "{facing.dw}" "3 Way" facing "w";

[3 Way]

once {
    """
    You are at a three way intersection with openings {facing.n}, {facing.e}, and {facing.s}.
    The passageway {facing.e} disappears into darkness.
    The passageway {facing.n} disappears into darkness.
    The passageway {facing.s} goes for 10ft past the intersection and ends at
    a set of stairs heading down.
    """
} else {
    """
    You see passageways {facing.e}, {facing.n}, and {facing.s}."
    The passage {facing.s} ends after 10ft at a flight of stairs heading down.
    """
}

wander = wander();
if (wander!="") {
    wander;
}

direction "{facing.dn}" "4way" facing "n";
direction "{facing.de}" "2" facing "e";
direction "{facing.ds}" "3" facing "s";

[3]

once {
    """
    You enter a 90ft x 40ft room full of wine and ale casks. Many are open. You don't see any other doors or
    passages leading from the room.
    """
} else {
    "You enter the room full of empty and broken casks."
}

direction "{facing.dn}" "3 Way" facing "n";

[4]

if (facing.is_facing("w")) {
    "You go down a 60ft passageway and step out into a large cave. The cave is about 100 ft x 70 ft."
}

once {
    """
    Water oozes down the walls of this natural cave and forms a 30ft diameter pond
    in the middle of it. You notice water dripping from the cave roof about 30ft
    above. From the pond a rivulet of water heads into the crack which appears large
    enough to walk into. The pond is covered in what appears to be a dark green
    scummy algae.
    """
} else {
    """
    You are in the cave with a pond in the middle.
    There is a large crack in the wall {facing.s}.
    The cave entrance is {facing.e}.
    """
}

option "Examine pond" {
    "You examine the pond and are suddenly turned around in a different direction!"
}

option "Examine crack" {
    "You examine the crack in the wall"
}

[4a]

"The crack is empty!"

direction "{facing.dn}" "4" facing "n";


